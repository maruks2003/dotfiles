#!/usr/bin/bash

CONFIG="/etc/systemd/logind.conf"

if [[ $1 = "toggle" ]]; then
{
	sed -i '/HandleLidSwitch=ignore/{s/HandleLidSwitch=ignore/HandleLidSwitch=suspend/;p;d};s/HandleLidSwitch=suspend/HandleLidSwitch=ignore/' $CONFIG ; sudo killall -HUP systemd-logind
	cat $CONFIG | rg "HandleLidSwitch="
}
elif [[ $1 = "on" ]]; then
{
	sed -i 's/HandleLidSwitch=ignore/HandleLidSwitch=suspend/g' $CONFIG ; sudo killall -HUP systemd-logind
	cat $CONFIG | rg "HandleLidSwitch="
}
elif [[ $1 = "off" ]]; then
{
	sed -i 's/HandleLidSwitch=suspend/HandleLidSwitch=ignore/g' $CONFIG ; sudo killall -HUP systemd-logind
	cat $CONFIG | rg "HandleLidSwitch="
}
elif [[ $1 = "info" ]]; then
{
	cat $CONFIG | rg "HandleLidSwitch="
}
else
{
	echo "Invalid argument, try:"
	echo "	toggle - toggle sleep behaviour on lid close"
	echo "	on - turn sleep on"
	echo "	off - turn sleep off"
	echo "	info - print info abour current config"
}
fi
